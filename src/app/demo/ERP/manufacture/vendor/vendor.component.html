<!-- Loader Starts -->
<div *ngIf="loader"
    class="spinner-container spinner-container d-flex position-fixed h-100 w-100 justify-content-center align-items-center">
    <div class="d-flex justify-content-center">
        <div class="spinner-border" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>
<!-- Loader Ends -->
<div class="container card p-3">
    <div *ngIf='!showAddVendor'>
        <div class="d-flex justify-content-between align-items-center">
            <form [formGroup]="modeForm">
                <button class="btn btn-primary text-white mr-1 disable" title="Manufacture"
                    disabled>Manufacture</button>
                <button class="btn btn-primary" routerLink="/v1/trade/vendor" title="Go To Trade">Trade</button>
            </form>
            <div>
                <button class="btn btn-primary" style="float: right;" (click)="show_AddVendor()">Add Vendor</button>
            </div>
        </div>
        <div>
            <h3 class="mb-3 mt-3" style="color: blue; font-weight: 700;">Manufacture</h3>
            <table class="table v-middle nowrap">
                <thead>
                    <tr>
                        <th class="border-top-0">Vendor Name</th>
                        <th class="border-top-0">Email</th>
                        <th class="border-top-0">Mobile</th>
                        <th class="border-top-0">Type</th>
                        <th class="border-top-0">GST</th>
                        <th class="border-top-0">Address</th>
                        <th class="border-top-0">Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of getVendorData; let i = index">
                        <td>{{getVendorData[i].name}}</td>
                        <td>{{getVendorData[i].email}}</td>
                        <td>{{getVendorData[i].phone}}</td>
                        <td>{{getVendorData[i].type}}</td>
                        <td>{{getVendorData[i].gstn}}</td>
                        <td>{{getVendorData[i].address}}</td>
                        <td class="d-flex">
                            <span style="cursor: pointer;"><i class="fa fa-edit" aria-hidden="true"
                                    (click)="update_vend_popup_open(content,i)"></i></span>
                            <span class="mx-2" style="cursor: pointer;" (click)="item_delete_popup_open(delete_popup, i)"><i
                                    class="fa fa-trash" aria-hidden="true"></i></span>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="add_vendor" *ngIf='showAddVendor'>
        <!-- <h3 class="mb-3 mt-3" style="color: blue; font-weight: 700;">Manufacture</h3> -->

        <div class="modal_head">
            <div class="modal_body">
                <div class="addVendorForm">
                    <form [formGroup]="addVendorForm" class="my-3">
                        <label class="lab_tag" for="">Name: <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" formControlName="ven_name">
                        <label class="lab_tag" for="">Email: <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" formControlName="ven_email">
                        <label class="lab_tag" for="">Mobile No: <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" formControlName="mob">
                        <label class="lab_tag" for="">Type: <span class="text-danger">*</span></label>
                        <select name="" id="" formControlName="type" class="form-control">
                            <option value="type" disabled>Select Type</option>
                            <option value="Intra State">Intra State</option>
                            <option value="Inter State">Inter State</option>
                        </select>
                        <label class="lab_tag" for="">GST No: <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" maxlength="15" minlength="15" formControlName="gst_in"
                            #gst (input)="gst.value=$event.target.value.toUpperCase()">
                        <div *ngIf="addVendorForm.get('gst_in').hasError('minlength') && addVendorForm.get('gst_in').touched"
                            class="err-message">
                            <span class="text-danger">It should be 15 digits.</span>
                        </div>
                        <div *ngIf="addVendorForm.get('gst_in').hasError('pattern') && addVendorForm.get('gst_in').touched"
                            class="err-message">
                            <span class="text-danger">Invalid GST No.</span>
                        </div>
                        <label class="lab_tag" for="">Address:</label>
                        <input type="text" class="form-control" formControlName="add">

                    </form>
                </div>
            </div>
        </div>
        <div class="d-flex justify-content-end align-items-center">
            <button class="btn btn-primary mr-1 disable" [disabled]="addVendorForm.invalid" type="submit"
                (click)="add_Vendor()">Add</button>
            <button class="btn btn-warning" type="reset" (click)="hide_AddVendor()">Cancel</button>
        </div>
    </div>
</div>
<!-- modal starts -->
<ng-template #content let-c="close" let-d="dismiss">
    <!-- <div class="modal-header">
      <h3 class="mb-3 mt-3 ml-3" style="color: blue; font-weight: 700;">Manufacture</h3>
        <button class="close_btn">
            <i class="fa fa-times-circle" aria-hidden="true" (click)="d('Cross click')"></i>
        </button>
    </div> -->
    <div class="modal-body">
        <div class="updateVendorForm">
            <form [formGroup]="updateVendorForm" class="my-3">
                <label class="lab_tag" for="">Name: <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="ven_name">
                <label class="lab_tag" for="">Email: <span class="text-danger">*</span></label>
                <input type="email" class="form-control" formControlName="ven_email">
                <label class="lab_tag" for="">Mobile No: <span class="text-danger">*</span></label>
                <input type="text" class="form-control" formControlName="mob">
                <label class="lab_tag" for="">Type: <span class="text-danger">*</span></label>
                <select name="" id="" formControlName="type" class="form-control">
                    <option value="type" disabled>Select Type</option>
                    <option value="Intra State">Intra State</option>
                    <option value="Inter State">Inter State</option>
                </select>
                <label class="lab_tag" for="">GST No: <span class="text-danger">*</span></label>
                <input type="text" class="form-control" maxlength="15" minlength="15" formControlName="gst_in" #gst
                    (input)="gst.value=$event.target.value.toUpperCase()" readonly>
                <div *ngIf="addVendorForm.get('gst_in').hasError('minlength') && addVendorForm.get('gst_in').touched"
                    class="err-message">
                    <span class="text-danger">It should be 15 digits.</span>
                </div>
                <div *ngIf="addVendorForm.get('gst_in').hasError('pattern') && addVendorForm.get('gst_in').touched"
                    class="err-message">
                    <span class="text-danger">Invalid GST No.</span>
                </div>
                <label class="lab_tag" for="">Address:</label>
                <input type="text" class="form-control" formControlName="add">

            </form>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-primary disable" [disabled]="updateVendorForm.invalid"
            (click)="update_vendor()">Submit</button>
        <button type="button" class="btn btn-warning" (click)="update_vend_popup_close(content)">Cancel</button>
    </div>
</ng-template>

<ng-template #delete_popup let-c="close" let-d="dismiss">
    <div class="modal-body">
      <p style="font-size: 18px;">Are you sure you want to delete the item ?</p>
    </div>
    <div class="modal-footer">
      <button border="none" (click)="deletePopup(delete_popup)" class="btn btn-primary mr-2">Cancel</button>
      <button border="none" (click)="delete_vendor();deletePopup(delete_popup)" class="btn btn-warning">Delete</button>
    </div>
  </ng-template>